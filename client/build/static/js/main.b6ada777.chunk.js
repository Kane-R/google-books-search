(this["webpackJsonpgoogle-books"]=this["webpackJsonpgoogle-books"]||[]).push([[0],{20:function(e,t,n){e.exports=n(33)},25:function(e,t,n){},26:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(17),c=n.n(r),i=(n(25),n(26),n(1)),l=Object(a.createContext)(),u=function(e){var t=Object(a.useState)({}),n=Object(i.a)(t,2),r=n[0],c=n[1],u=Object(a.useState)(""),s=Object(i.a)(u,2),m=s[0],d=s[1],f=Object(a.useState)(!1),v=Object(i.a)(f,2),p=v[0],b=v[1],h=Object(a.useState)(""),E=Object(i.a)(h,2),k=E[0],g=E[1],j=Object(a.useState)("hide"),w=Object(i.a)(j,2),O=w[0],y=w[1],x=Object(a.useState)(""),N=Object(i.a)(x,2),C=N[0],T=N[1];return o.a.createElement(l.Provider,{value:{bookData:[r,c],savedBookData:[m,d],fetchData:[p,b],search:[k,g],modal:[O,y],modalCopy:[C,T]}},e.children)},s=n(11),m=function(){return o.a.createElement("nav",null,o.a.createElement("p",null,"Google Books"),o.a.createElement("ul",{className:"nav-links"},o.a.createElement(s.b,{to:"/",exact:!0},o.a.createElement("li",null,"Home")),o.a.createElement(s.b,{to:"/saved"},o.a.createElement("li",null,"Saved"))))},d=n(5),f=n.n(d),v=n(8),p=function(){var e=Object(a.useContext)(l),t=e.search,n=e.bookData,r=e.fetchData,c=Object(i.a)(n,2),u=(c[0],c[1]),s=Object(i.a)(r,2),m=s[0],d=s[1],p=Object(i.a)(t,2),b=p[0],h=p[1],E=function(e){return Object(v.a)(f.a.mark((function t(){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),""!==b){t.next=4;break}t.next=12;break;case 4:return t.next=6,fetch("/api/books",{method:"POST",body:JSON.stringify({searching:b}),headers:{"Content-Type":"application/json"}});case 6:return n=t.sent,t.next=9,n.json();case 9:a=t.sent,u(a),!1===m&&d(m=!0);case 12:case"end":return t.stop()}}),t)})))()};return o.a.createElement(o.a.Fragment,null,o.a.createElement("header",null,o.a.createElement("h1",null,"Google Books Search")),o.a.createElement("section",{className:"filterBar"},o.a.createElement("form",{action:""},o.a.createElement("input",{type:"text",placeholder:"Filter by book name...",value:b,name:"book-search",onChange:function(e){h(b=e.target.value)},onKeyPress:function(e){return function(e){"Enter"===e.key&&E()}(e)}}),o.a.createElement("button",{onClick:function(e){return E(e)}},"Search"))))},b=function(){var e=Object(a.useContext)(l),t=e.bookData,n=e.fetchData,r=e.modal,c=e.modalCopy,u=Object(i.a)(n,1)[0],s=Object(i.a)(r,2),m=(s[0],s[1]),d=Object(i.a)(c,2),p=(d[0],d[1]),b=function(e){return Object(v.a)(f.a.mark((function n(){var a,o,r,c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t[0].items.filter((function(t){return t.id===e})),o={id:a[0].id,title:a[0].volumeInfo.title,description:a[0].volumeInfo.description,authors:a[0].volumeInfo.authors,imgUrl:a[0].volumeInfo.imageLinks.thumbnail,linkUrl:a[0].volumeInfo.infoLink},n.next=4,fetch("/api/saveBooks",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}});case 4:return r=n.sent,n.next=7,r;case 7:200===(c=n.sent).status?(m(""),p("Book added to saved books."),setTimeout((function(){m("set")}),500),setTimeout((function(){m("")}),3e3),setTimeout((function(){m("hide")}),3500)):304===c.status?(m(""),p("Book already in saved books."),setTimeout((function(){m("not-set")}),500),setTimeout((function(){m("")}),3e3),setTimeout((function(){m("hide")}),3500)):(m(""),p("Error action at this time cannot be completed."),setTimeout((function(){m("not-set")}),500),setTimeout((function(){m("")}),3e3),setTimeout((function(){m("hide")}),3500));case 9:case"end":return n.stop()}}),n)})))()};return o.a.createElement("section",{id:"searchedBooks"},!1===u?"":o.a.createElement(o.a.Fragment,null,t[0].items.map((function(e){return o.a.createElement("div",{className:"book",key:e.id},o.a.createElement("h3",null,e.volumeInfo.title),o.a.createElement("h4",null,"Written By: ",e.volumeInfo.authors?e.volumeInfo.authors.map((function(e){return" ".concat(e)})).toString():" Not Provided"),o.a.createElement("div",{className:"book-info"},o.a.createElement("div",{className:"book-buttons"},o.a.createElement("button",{onClick:function(t){t.preventDefault(),window.open(e.volumeInfo.infoLink)}},"View"),o.a.createElement("button",{"data-id":e.id,onClick:function(e){return b(e.target.getAttribute("data-id"))}},"Save")),o.a.createElement("div",null,e.volumeInfo.imageLinks?o.a.createElement("img",{src:e.volumeInfo.imageLinks.thumbnail,alt:"book.volumeInfo.title"}):o.a.createElement("img",{src:"./content/img/not-found.jpg",alt:"Not Found",width:"150"})),o.a.createElement("div",null,e.volumeInfo.description?o.a.createElement("p",null,e.volumeInfo.description):o.a.createElement("p",null,"No description has been provided for this book."))))}))))};var h=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(p,null),o.a.createElement(b,null))};var E=function(){var e=Object(a.useContext)(l),t=e.savedBookData,n=e.modal,r=e.modalCopy,c=Object(i.a)(t,2),u=c[0],s=c[1],m=Object(i.a)(n,2),d=(m[0],m[1]),p=Object(i.a)(r,2),b=(p[0],p[1]),h=function(){return Object(v.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/savedBooks");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,s(u=n);case 7:case"end":return e.stop()}}),e)})))()},E=function(e){return Object(v.a)(f.a.mark((function t(){var n,a,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={id:e},t.next=3,fetch("/api/removeBook",{method:"DELETE",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});case 3:return a=t.sent,t.next=6,a;case 6:o=t.sent,console.log(o),200===o.status?(d(""),b("Book removed from saved books."),setTimeout((function(){d("set")}),500),setTimeout((function(){d("")}),3e3),setTimeout((function(){d("hide")}),3500),s(u=u.filter((function(t){return t.bookId!==e})))):(d(""),b("Error action at this time cannot be completed."),setTimeout((function(){d("not-set")}),500),setTimeout((function(){d("")}),3e3),setTimeout((function(){d("hide")}),3500));case 9:case"end":return t.stop()}}),t)})))()};return Object(a.useEffect)((function(){h()}),[]),o.a.createElement("section",{id:"savedBooks"},o.a.createElement("header",null,o.a.createElement("h1",null,"Google Books Saved")),""===u?"":o.a.createElement(o.a.Fragment,null,t[0].map((function(e){return o.a.createElement("div",{className:"book",key:e.bookId},o.a.createElement("h3",null,e.title),o.a.createElement("h4",null,"Written By: ",e.authors?e.authors.map((function(e){return" ".concat(e)})).toString():" Not Provided"),o.a.createElement("div",{className:"book-info"},o.a.createElement("div",{className:"book-buttons"},o.a.createElement("button",{onClick:function(t){t.preventDefault(),window.open(e.linkUrl)}},"View"),o.a.createElement("button",{"data-id":e.bookId,onClick:function(e){return E(e.target.getAttribute("data-id"))}},"Delete")),o.a.createElement("div",null,e.imgUrl?o.a.createElement("img",{src:e.imgUrl,alt:"book.volumeInfo.title"}):o.a.createElement("img",{src:"./content/img/not-found.jpg",alt:"Not Found",width:"150"})),o.a.createElement("div",null,e.description?o.a.createElement("p",null,e.description):o.a.createElement("p",null,"No description has been provided for this book."))))}))))};var k=function(){var e=Object(a.useContext)(l),t=e.modal,n=e.modalCopy,r=Object(i.a)(t,1)[0],c=Object(i.a)(n,1)[0];return o.a.createElement(o.a.Fragment,null,o.a.createElement("section",{id:"MessageModal",className:r},o.a.createElement("p",{id:"ModalMessage"},c)))};var g=function(){var e=(new Date).getFullYear();return o.a.createElement(o.a.Fragment,null,o.a.createElement("footer",null,o.a.createElement("p",{id:"copyright"},"Copyright \xa9 Kane Robinson",e)))},j=n(7);var w=function(){return o.a.createElement(u,null,o.a.createElement(s.a,null,o.a.createElement("div",{className:"App"},o.a.createElement(m,null),o.a.createElement("section",{id:"wrapper"},o.a.createElement("div",{id:"wrapper-contents"},o.a.createElement(j.c,null,o.a.createElement(j.a,{path:"/",exact:!0,activeClassName:"is-active",component:h}),o.a.createElement(j.a,{path:"/saved",activeClassName:"is-active",component:E}))),o.a.createElement(g,null)),o.a.createElement(k,null))))},O=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function y(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(o.a.createElement(w,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");O?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):y(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):y(e)}))}}()}},[[20,1,2]]]);
//# sourceMappingURL=main.b6ada777.chunk.js.map